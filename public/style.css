/* ★重要: 全要素のはみ出しを防止する設定 */
* { box-sizing: border-box; }

/* ベース設定 */
body { margin: 0; padding: 0; font-family: "Helvetica Neue", Arial, sans-serif; background-color: #f1f1f1; display: flex; height: 100vh; height: 100dvh; overflow: hidden; }

/* サイドバー (PC) */
#sidebar { width: 250px; background-color: #fff; border-right: 1px solid #ddd; padding: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 10; flex-shrink: 0; }
h1 { font-size: 20px; color: #cc0000; margin-top: 0; margin-bottom: 0; display: flex; align-items: center; gap: 10px; white-space: nowrap; }

#group-buttons { flex: 1; overflow-y: auto; }
.group-btn { display: block; width: 100%; padding: 12px; margin-bottom: 8px; border: none; background: none; text-align: left; font-size: 14px; cursor: pointer; border-radius: 8px; color: #333; }
.group-btn:hover { background-color: #f5f5f5; }
.group-btn.active { background-color: #ffe6e6; color: #cc0000; font-weight: bold; }

/* ボタン類 */
.action-btn { 
  width: 100%; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: bold; border: none; 
  display: flex; align-items: center; justify-content: center; gap: 8px; 
  text-decoration: none; font-size: 13px; color: #333; background: #eee;
  margin-top: 10px; /* PC版でのマージン */
}
#refreshBtn { background-color: #cc0000; color: white; }
#refreshBtn:hover { background-color: #ff0000; }
#settingsLink:hover { background-color: #ddd; }

/* PC版セレクトボックス */
.pc-limit-select { width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #ddd; margin-bottom: 10px; }
/* スマホ版セレクトボックス（PCでは非表示） */
.mobile-limit-select-container { display: none; }


/* メインエリア */
#main { flex: 1; padding: 30px; overflow-y: auto; position: relative; }
#status { margin-bottom: 20px; color: #666; font-size: 14px; }
.video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }

/* 動画カード */
.video-card { 
  background: white; 
  border-radius: 10px; 
  overflow: hidden; 
  box-shadow: 0 2px 5px rgba(0,0,0,0.1); 
  transition: transform 0.2s; 
  display: flex; 
  flex-direction: column;
}
.video-card:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
.video-card.watched { opacity: 0.6; background-color: #f9f9f9; }

/* ピン留めされたカードのデザイン */
.video-card.pinned-card {
  border: 2px solid #ffd700;
  background-color: #fffff0;
  box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
}

/* ピンボタンのデザイン */
.card-header { position: relative; }
.pin-btn {
  position: absolute;
  top: 5px; left: 5px;
  background: rgba(0,0,0,0.6);
  color: #ccc;
  border: none; border-radius: 50%;
  width: 32px; height: 32px;
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  font-size: 16px; transition: all 0.2s; z-index: 5;
}
.pin-btn:hover { background: rgba(0,0,0,0.8); transform: scale(1.1); }
.pin-btn.active { background: #ffd700; color: #d32f2f; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }

.thumb-link { display: block; position: relative; padding-top: 56.25%; }
.thumb-link img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; }
.card-content { padding: 12px; flex: 1; display: flex; flex-direction: column; }
.video-title { font-size: 15px; font-weight: bold; margin: 0 0 8px; line-height: 1.4; color: #0f0f0f; text-decoration: none; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;}
.video-meta { font-size: 12px; color: #606060; margin-top: auto; display: flex; justify-content: space-between; }
.group-badge { background: #eee; padding: 2px 6px; border-radius: 4px; font-size: 11px; }

.mark-watched-btn { background: #fff; border: 1px solid #ddd; color: #666; border-radius: 4px; cursor: pointer; padding: 4px 8px; font-size: 11px; margin-top: 5px; transition: all 0.2s; }
.mark-watched-btn:hover { background: #eee; border-color: #ccc; }
.watched .mark-watched-btn { background: #666; color: #fff; border-color: #666; }

/* ▼▼▼ スマホ用レスポンシブ設定 (768px以下) ▼▼▼ */
@media (max-width: 768px) {
  body { flex-direction: column; height: 100dvh; }
  
  /* ヘッダー固定エリア */
  #sidebar { 
    width: 100%; 
    height: auto; 
    padding: 10px 15px; 
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    gap: 10px;
    flex-shrink: 0;
    border-right: none;
    border-bottom: 1px solid #eee;
  }
  
  h1 { font-size: 18px; }

  /* グループボタン（横スクロール） */
  #group-buttons { 
    display: flex; 
    overflow-x: auto; 
    white-space: nowrap; 
    padding-bottom: 0; 
    margin-bottom: 0;
    flex: none; 
    gap: 8px;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }
  #group-buttons::-webkit-scrollbar { display: none; }

  .group-btn { 
    display: inline-block; 
    width: auto; 
    padding: 6px 14px; 
    margin-bottom: 0; 
    background: #f0f0f0;
    border-radius: 20px;
    font-size: 12px;
    border: 1px solid #eee;
  }
  .group-btn.active { background-color: #cc0000; color: white; border-color: #cc0000; }

  /* メインエリア */
  #main { padding: 15px; background: #f1f1f1; }
  
  .video-grid { grid-template-columns: 1fr; gap: 15px; padding-bottom: 40px; }
  
  /* 操作ボタン調整 */
  .action-btn { font-size: 12px; padding: 8px; margin-top: 0; /* スマホではマージン不要 */ }

  /* PC用セレクトボックス非表示 */
  .pc-limit-select { display: none; }
  /* スマホ用セレクトボックスコンテナ表示 */
  .mobile-limit-select-container { display: flex; gap: 8px; align-items: center; }
}